\hypertarget{rb__http__handler_8c}{\section{src/rb\-\_\-http\-\_\-handler.c File Reference}
\label{rb__http__handler_8c}\index{src/rb\-\_\-http\-\_\-handler.\-c@{src/rb\-\_\-http\-\_\-handler.\-c}}
}


Main library.  


{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$curl/curl.\-h$>$}\\*
{\ttfamily \#include $<$assert.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$librd/rdqueue.\-h$>$}\\*
{\ttfamily \#include $<$librd/rdlog.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$librd/rdthread.\-h$>$}\\*
{\ttfamily \#include \char`\"{}librb-\/http.\-h\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structrb__http__handler__s}{rb\-\_\-http\-\_\-handler\-\_\-s}
\item 
struct \hyperlink{structrb__http__message__s}{rb\-\_\-http\-\_\-message\-\_\-s}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structrb__http__handler__s}{rb\-\_\-http\-\_\-handler\-\_\-s} $\ast$ \hyperlink{rb__http__handler_8c_a68c2a5bd671ddb123e3f38057b5c45f6}{rb\-\_\-http\-\_\-handler} (const char $\ast$urls\-\_\-str, long curlmopt\-\_\-maxconnects, int max\-\_\-messages, char $\ast$err, size\-\_\-t errsize)
\begin{DoxyCompactList}\small\item\em Creates a handler to produce messages. \end{DoxyCompactList}\item 
void \hyperlink{rb__http__handler_8c_a57eb6a7b4fba5c589b2a4afbb61f314c}{rb\-\_\-http\-\_\-handler\-\_\-destroy} (struct \hyperlink{structrb__http__handler__s}{rb\-\_\-http\-\_\-handler\-\_\-s} $\ast$\hyperlink{rb__http__handler_8c_a68c2a5bd671ddb123e3f38057b5c45f6}{rb\-\_\-http\-\_\-handler})
\begin{DoxyCompactList}\small\item\em Free memory from a handler. \end{DoxyCompactList}\item 
int \hyperlink{rb__http__handler_8c_a6f4b97a63ef87f1f51176db8947ab907}{rb\-\_\-http\-\_\-produce} (struct \hyperlink{structrb__http__handler__s}{rb\-\_\-http\-\_\-handler\-\_\-s} $\ast$\hyperlink{rb__http__handler__example_8c_a0165697b451a136ac74647662a5a39e1}{handler}, char $\ast$buff, size\-\_\-t len, int flags, void $\ast$opaque)
\begin{DoxyCompactList}\small\item\em Enqueues a message (non-\/blocking) \end{DoxyCompactList}\item 
void \hyperlink{rb__http__handler_8c_aa9121154f5242572bfbc47fca33c1310}{rb\-\_\-http\-\_\-get\-\_\-reports} (struct \hyperlink{structrb__http__handler__s}{rb\-\_\-http\-\_\-handler\-\_\-s} $\ast$\hyperlink{rb__http__handler_8c_a68c2a5bd671ddb123e3f38057b5c45f6}{rb\-\_\-http\-\_\-handler}, \hyperlink{librb-http_8h_a04bb44224e2874cbf2df16042f2a4c53}{cb\-\_\-report} report\-\_\-fn)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Main library. \begin{DoxyAuthor}{Author}
Diego Fern√°ndez Barrera 
\end{DoxyAuthor}


Definition in file \hyperlink{rb__http__handler_8c_source}{rb\-\_\-http\-\_\-handler.\-c}.



\subsection{Function Documentation}
\hypertarget{rb__http__handler_8c_aa9121154f5242572bfbc47fca33c1310}{\index{rb\-\_\-http\-\_\-handler.\-c@{rb\-\_\-http\-\_\-handler.\-c}!rb\-\_\-http\-\_\-get\-\_\-reports@{rb\-\_\-http\-\_\-get\-\_\-reports}}
\index{rb\-\_\-http\-\_\-get\-\_\-reports@{rb\-\_\-http\-\_\-get\-\_\-reports}!rb_http_handler.c@{rb\-\_\-http\-\_\-handler.\-c}}
\subsubsection[{rb\-\_\-http\-\_\-get\-\_\-reports}]{\setlength{\rightskip}{0pt plus 5cm}void rb\-\_\-http\-\_\-get\-\_\-reports (
\begin{DoxyParamCaption}
\item[{struct {\bf rb\-\_\-http\-\_\-handler\-\_\-s} $\ast$}]{rb\-\_\-http\-\_\-handler, }
\item[{{\bf cb\-\_\-report}}]{report\-\_\-fn}
\end{DoxyParamCaption}
)}}\label{rb__http__handler_8c_aa9121154f5242572bfbc47fca33c1310}


Definition at line 347 of file rb\-\_\-http\-\_\-handler.\-c.

\hypertarget{rb__http__handler_8c_a68c2a5bd671ddb123e3f38057b5c45f6}{\index{rb\-\_\-http\-\_\-handler.\-c@{rb\-\_\-http\-\_\-handler.\-c}!rb\-\_\-http\-\_\-handler@{rb\-\_\-http\-\_\-handler}}
\index{rb\-\_\-http\-\_\-handler@{rb\-\_\-http\-\_\-handler}!rb_http_handler.c@{rb\-\_\-http\-\_\-handler.\-c}}
\subsubsection[{rb\-\_\-http\-\_\-handler}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf rb\-\_\-http\-\_\-handler\-\_\-s}$\ast$ rb\-\_\-http\-\_\-handler (
\begin{DoxyParamCaption}
\item[{const char $\ast$}]{urls\-\_\-str, }
\item[{long}]{curlmopt\-\_\-maxconnects, }
\item[{int}]{max\-\_\-messages, }
\item[{char $\ast$}]{err, }
\item[{size\-\_\-t}]{errsize}
\end{DoxyParamCaption}
)}}\label{rb__http__handler_8c_a68c2a5bd671ddb123e3f38057b5c45f6}


Creates a handler to produce messages. 

Functions.


\begin{DoxyParams}{Parameters}
{\em urls\-\_\-str} & List of comma sepparated U\-R\-Ls. If the first U\-R\-L doesn't work it will try the next one. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Handler for send messages to the provided U\-R\-L. 
\end{DoxyReturn}


Definition at line 69 of file rb\-\_\-http\-\_\-handler.\-c.

\hypertarget{rb__http__handler_8c_a57eb6a7b4fba5c589b2a4afbb61f314c}{\index{rb\-\_\-http\-\_\-handler.\-c@{rb\-\_\-http\-\_\-handler.\-c}!rb\-\_\-http\-\_\-handler\-\_\-destroy@{rb\-\_\-http\-\_\-handler\-\_\-destroy}}
\index{rb\-\_\-http\-\_\-handler\-\_\-destroy@{rb\-\_\-http\-\_\-handler\-\_\-destroy}!rb_http_handler.c@{rb\-\_\-http\-\_\-handler.\-c}}
\subsubsection[{rb\-\_\-http\-\_\-handler\-\_\-destroy}]{\setlength{\rightskip}{0pt plus 5cm}void rb\-\_\-http\-\_\-handler\-\_\-destroy (
\begin{DoxyParamCaption}
\item[{struct {\bf rb\-\_\-http\-\_\-handler\-\_\-s} $\ast$}]{rb\-\_\-http\-\_\-handler}
\end{DoxyParamCaption}
)}}\label{rb__http__handler_8c_a57eb6a7b4fba5c589b2a4afbb61f314c}


Free memory from a handler. 


\begin{DoxyParams}{Parameters}
{\em rb\-\_\-http\-\_\-handler} & Handler that will freed \\
\hline
\end{DoxyParams}


Definition at line 116 of file rb\-\_\-http\-\_\-handler.\-c.

\hypertarget{rb__http__handler_8c_a6f4b97a63ef87f1f51176db8947ab907}{\index{rb\-\_\-http\-\_\-handler.\-c@{rb\-\_\-http\-\_\-handler.\-c}!rb\-\_\-http\-\_\-produce@{rb\-\_\-http\-\_\-produce}}
\index{rb\-\_\-http\-\_\-produce@{rb\-\_\-http\-\_\-produce}!rb_http_handler.c@{rb\-\_\-http\-\_\-handler.\-c}}
\subsubsection[{rb\-\_\-http\-\_\-produce}]{\setlength{\rightskip}{0pt plus 5cm}int rb\-\_\-http\-\_\-produce (
\begin{DoxyParamCaption}
\item[{struct {\bf rb\-\_\-http\-\_\-handler\-\_\-s} $\ast$}]{handler, }
\item[{char $\ast$}]{buff, }
\item[{size\-\_\-t}]{len, }
\item[{int}]{flags, }
\item[{void $\ast$}]{opaque}
\end{DoxyParamCaption}
)}}\label{rb__http__handler_8c_a6f4b97a63ef87f1f51176db8947ab907}


Enqueues a message (non-\/blocking) 


\begin{DoxyParams}{Parameters}
{\em handler} & The handler that will be used to send the message. \\
\hline
{\em message} & Message to be enqueued. \\
\hline
{\em options} & Options \\
\hline
\end{DoxyParams}


Definition at line 143 of file rb\-\_\-http\-\_\-handler.\-c.

